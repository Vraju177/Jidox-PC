{% extends "partials/base.html" %}
{% load static %}

{% block title %}Datatables{% endblock title %}

{% block extra_css %}
    <link href="{% static 'vendor/datatables.net-bs5/css/dataTables.bootstrap5.min.css' %}" rel="stylesheet" type="text/css" />
    <link href="{% static 'vendor/datatables.net-responsive-bs5/css/responsive.bootstrap5.min.css' %}" rel="stylesheet" type="text/css" />
    <link href="{% static 'vendor/datatables.net-fixedcolumns-bs5/css/fixedColumns.bootstrap5.min.css' %}" rel="stylesheet" type="text/css" />
    <link href="{% static 'vendor/datatables.net-fixedheader-bs5/css/fixedHeader.bootstrap5.min.css'%}" rel="stylesheet" type="text/css" />
    <link href="{% static 'vendor/datatables.net-buttons-bs5/css/buttons.bootstrap5.min.css' %}" rel="stylesheet" type="text/css" />
    <link href="{% static 'vendor/datatables.net-select-bs5/css/select.bootstrap5.min.css' %}" rel="stylesheet" type="text/css" />
{% endblock extra_css %}

{% block pagetitle %}
    {% include "partials/page-title.html" with pagetitle="Tables" title="Data Tables" %}
{% endblock pagetitle %}

{% block content %}
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-body">
                <h4 class="header-title">Basic Data Table</h4>
                <table id="basic-datatable" class="table table-striped dt-responsive nowrap w-100">
                    <thead>
                        <tr> 
                            <th>Full Name</th>
                            <th>User Name</th>
                            <th>Node</th>
                            <th>Service Type</th>
                            <th>Creation Date</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Records will be populated here -->
                    </tbody>
                </table>  
            </div> <!-- end card body-->
        </div> <!-- end card -->
    </div><!-- end col-->
</div> <!-- end row-->
{% endblock content %}

{% block extra_js %}
    <script src="{% static 'js/pages/demo.datatable-init.js' %}"></script>
    <script src="{% static 'js/app.min.js' %}"></script>

    <script>
        $(document).ready(function() {
            // Initialize the DataTable with AJAX
            $('#basic-datatable').DataTable({
                processing: true,
                serverSide: true,
                ajax: '{% url "users:user_data" %}',  // Your AJAX endpoint here
                columns: [
                    { data: 'full_name' },
                    { data: 'username' },
                    { data: 'node' },
                    { data: 'service_type' },
                    { data: 'user_creation_date' },
                    { data: 'status' }
                ]
            });
        });
    </script>
{% endblock extra_js %}
